<!doctype html>
<html>
<head>
    <title>F1 Telemetry</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>

<body>
    <div class="bg-red-600 text-center text-sm p-1 text-gray-50">
        Go to <a id="nav" class="hover:underline font-bold" href="live.html">Live Data</a>
    </div>

    <div class="flex flex-col text-gray-50 h-full flex-grow">
        <div class="flex flex-row py-2 bg-gray-900 bg-opacity-80 backdrop-blur drop-shadow-md">
            <!-- Sessions -->
            <div id="session" class="p-1 flex flex-col">
                <div class="p-1 text-center font-bold">SESSIONS</div>
                <div class="p-2 max-h-64 h-64 w-64 max-w-64 overflow-y-auto">
                    <ul class="text-sm" id="session_list"/>
                </div>
            </div>

            <!-- Laps -->
            <div id="laps" class="p-1 flex flex-col">
                <div class="p-1 text-center font-bold">LAPS</div>
                <div class="p-2 max-h-64 h-64 w-24 max-w-24 overflow-y-auto">
                    <ul class="text-sm text-center" id="lap_list"/>
                </div>
            </div>

            <!-- Spacer -->
            <div id="spacer" class="p-1 flex flex-col flex-grow"></div>

            <!-- Info box -->
            <div id="info" class="flex flex-row flex-grow hidden">
                <!-- Track -->
                <div class="p-1 text-center flex flex-col min-w-48 w-48">
                    <div class="p-1 text-center font-bold">TRACK</div>
                    <div class="flex flex-grow max-h-64" id="track"></div>
                </div>

                <!-- Lap timings -->
                <div class="p-1 text-center flex-col flex-grow-0">
                    <div class="p-1 text-center font-bold flex-grow w-96" id="lap-label">LAP</div>
                    <div class="flex-grow-0 flex-col">
                        <!-- Total lap time -->
                        <div class="flex-grow-0 text-5xl p-4 h-24" id="total-time"></div>

                        <!-- Sectors -->
                        <div class="flex flex-grow-0 w-64 m-auto flex-row">
                            <!-- Sector 1 -->
                            <div class="flex-grow flex-col">
                                <div class="p-1 text-center font-bold bg-slate-900">S1</div>
                                <div class="p-1 text-center font-bold" id="s1"></div>
                            </div>
                            <!-- Sector 2 -->
                            <div class="flex-grow flex-col">
                                <div class="p-1 text-center font-bold bg-slate-900">S2</div>
                                <div class="p-1 text-center font-bold" id="s2"></div>
                            </div>
                            <!-- Sector 3 -->
                            <div class="flex-grow flex-col">
                                <div class="p-1 text-center font-bold bg-slate-900">S3</div>
                                <div class="p-1 text-center font-bold" id="s3"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tyre -->
                <div class="p-1 text-center flex-col">
                    <div class="flex-grow-0 flex-col">
                        <div class="p-1 text-center font-bold" id="lap-label">TYRE</div>
                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 160 160" height="160" width="160">
                            <g>
                                <circle style="fill:none;stroke-width:12;" class="tyre-none" id="tyre-circle" cx="80" cy="80" r="48" />
                                <text class="tyre-label" x="80" y="98" id="tyre-label" text-anchor="middle"></text>
                            </g>
                        </svg>
                        <span id="tyre-age"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Plots -->
        <div id="dash" class="flex flex-row flex-grow p-2">
            <!-- LX -->
            <div class="flex flex-col flex-grow">
                <div id="input" class="plot"></div>
                <div id="gap" class="plot"></div>
                <div id="speed" class="plot"></div>
                <div id="gears" class="plot"></div>
                <div id="steer" class="plot"></div>
            </div>
            <!-- RX -->
            <div class="flex flex-col flex-grow">
                <div id="tstemp" class="plot"></div>
                <div id="titemp" class="plot"></div>
                <div id="twear" class="plot"></div>
                <div id="pressures" class="plot"></div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.0.4/d3.min.js"></script>
    <script src="utils.js"></script>
    <script src="plots.js"></script>
    <script src="view.js"></script>
    <script type="module">
        import { getSessions } from './queries.js'

        getSessions()
    </script>
</body>
</html>
